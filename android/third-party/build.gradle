apply plugin: 'com.android.library'
apply from: 'native.gradle'

android {
    compileSdkVersion rootProject.compileSdkVersion
    buildToolsVersion rootProject.buildToolsVersion

    defaultConfig {
        minSdkVersion rootProject.minSdkVersion
        targetSdkVersion rootProject.targetSdkVersion

        externalNativeBuild {
            cmake {
                arguments '-DANDROID_TOOLCHAIN=clang'
                targets
            }
        }
    }

    sourceSets {
        main {
            manifest.srcFile './AndroidManifest.xml'
        }
    }

    externalNativeBuild {
        cmake {
            path 'CMakeLists.txt'
        }
    }
}

task prepare(dependsOn: [prepareAllLibs]) {
}

dependencies {
    implementation project(':glog')
    implementation project(':doubleconversion')
    implementation project(':libevent')
    implementation project(':rsocket')
    implementation project(':folly')
}

build.dependsOn prepare
clean.dependsOn cleanNative
